<%- include('partials/header', { pageTitle, theme }) %>
<%- include('partials/nav') %>
<main id="main" class="layout">
  <section class="page-header">
    <h1><%= t.success_title || 'Success Log' %></h1>
    <p><%= t.success_intro || 'Celebrate the landfalls of Hope Turtles and share new stories.' %></p>
  </section>

  <section class="success-grid full">
    <% entries.forEach(function (entry) { %>
      <article class="success-card">
        <header>
          <h2><%= t.success_card_thanks || 'Thank you' %></h2>
          <span><%= entry.date_found %></span>
        </header>
        <p><%= entry.thank_you_message %></p>
        <footer>
          <span><%= t.success_coordinates || 'Coordinates' %>: <%= entry.location_lat %>, <%= entry.location_lng %></span>
          <% if (entry.turtle_name) { %>
            <span><%= t.success_turtle || 'Turtle' %>: <%= entry.turtle_name %></span>
          <% } %>
        </footer>
      </article>
    <% }) %>
  </section>

  <section class="success-form">
    <h2><%= t.success_form_title || 'Submit a new success' %></h2>
    <form id="successForm" class="form-card" enctype="multipart/form-data">
      <label>
        <%= t.success_form_turtle || 'Turtle' %>
        <select name="turtle_id">
          <option value=""><%= t.success_form_turtle_unknown || 'Unknown turtle' %></option>
          <% turtles.forEach(function (turtle) { %>
            <option value="<%= turtle.turtle_id %>"><%= turtle.name %></option>
          <% }) %>
        </select>
      </label>
      <label>
        <%= t.success_form_date || 'Date found' %>
        <input type="date" name="date_found" />
      </label>
      <label>
        <%= t.success_form_lat || 'Latitude' %>
        <input type="number" step="0.000001" name="location_lat" />
      </label>
      <label>
        <%= t.success_form_lng || 'Longitude' %>
        <input type="number" step="0.000001" name="location_lng" />
      </label>
      <label>
        <%= t.success_form_message || 'Thank you message' %>
        <textarea name="thank_you_message" required></textarea>
      </label>
      <label>
        <%= t.success_form_photo || 'Photo upload' %>
        <input type="file" name="photo" accept="image/*" />
      </label>
      <button type="submit" class="button"><%= t.success_form_submit || 'Submit success' %></button>
      <p id="successFeedback" role="status" aria-live="polite"></p>
    </form>
  </section>
</main>
<% const pageScripts = ['/js/success.js']; %>
<%- include('partials/footer', { pageScripts }) %>
