<dialog id="manageTurtleDialog" class="mission-dialog" aria-labelledby="manageTurtleTitle">
  <form
    class="form-card admin-form turtle-form"
    data-manage-turtle-form
    data-method="PUT"
    enctype="multipart/form-data"
  >
    <header class="mission-dialog__header">
      <div>
        <h2 id="manageTurtleTitle">Manage turtle</h2>
        <p class="panel-subtitle">
          Update turtle details or retrieve its secret key.
        </p>
      </div>
      <button type="button" class="dialog-close" data-close-manage-turtle aria-label="Close">&times;</button>
    </header>
    <div class="mission-form-grid">
      <label class="full-width">
        Turtle name
        <input name="name" />
      </label>
      <label>
        Status
        <select name="status">
          <option value="">No status</option>
          <% (turtleStatusOptions || []).forEach(function (status) { %>
            <option value="<%= status %>"><%= status %></option>
          <% }) %>
        </select>
      </label>
      <label>
        Mission
        <select name="mission_id">
          <option value="">No mission assigned</option>
          <% (missions || []).forEach(function (mission) { %>
            <option value="<%= mission.mission_id %>"><%= mission.name %></option>
          <% }) %>
        </select>
      </label>
      <label>
        Hub
        <select name="hub_id">
          <option value="">No hub assigned</option>
          <% (hubs || []).forEach(function (hub) { %>
            <option value="<%= hub.hub_id %>"><%= hub.name %></option>
          <% }) %>
        </select>
      </label>
      <label>
        Boat
        <select name="boat_id">
          <option value="">No boat assigned</option>
          <% (boats || []).forEach(function (boat) { %>
            <option value="<%= boat.boat_id %>"><%= boat.name %></option>
          <% }) %>
        </select>
      </label>
      <label class="full-width feature-photo-field">
        Feature photo
        <input type="file" name="profile_photo" accept="image/*" />
        <span class="muted">Optional. JPG or PNG works best.</span>
        <figure class="feature-photo-preview" data-feature-photo-preview hidden>
          <img src="" alt="Current feature photo" loading="lazy" data-feature-photo-image />
          <figcaption>Current photo</figcaption>
        </figure>
      </label>
    </div>
    <section class="turtle-secret-panel" aria-live="polite">
      <h3>Secret key</h3>
      <p class="muted">Share this secret only with the turtle it belongs to.</p>
      <div class="secret-key-card" data-secret-card hidden>
        <pre class="secret-key-value" data-managed-turtle-secret></pre>
      </div>
      <button type="button" class="button ghost" data-secret-action>View secret</button>
      <p class="copy-feedback muted" data-managed-secret-feedback role="status"></p>
    </section>
    <div class="mission-dialog__actions mission-dialog__actions--split">
      <button type="button" class="button button-outline-danger" data-delete-turtle>Delete turtle</button>
      <div class="mission-dialog__actions-group">
        <button type="button" class="button ghost" data-close-manage-turtle>Cancel</button>
        <button type="submit" class="button">Save changes</button>
      </div>
    </div>
    <p class="form-feedback" role="status" data-managed-turtle-feedback></p>
  </form>
</dialog>
